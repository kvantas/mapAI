<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot the Learned Correction Surface — plot_correction_surface • mapAI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot the Learned Correction Surface — plot_correction_surface"><meta name="description" content="Visualizes the spatial correction field (dx, dy) learned by a
PAI model."><meta property="og:description" content="Visualizes the spatial correction field (dx, dy) learned by a
PAI model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mapAI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/demo_data.html">Getting Started with mapAI: A Complete Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/pai_validation.html">Comparing PAI Methods and Validation Strategies</a></li>
    <li><a class="dropdown-item" href="../articles/swiss_data.html">Advanced Analysis with Swiss Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kvantas/mapAI/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot the Learned Correction Surface</h1>
      <small class="dont-index">Source: <a href="https://github.com/kvantas/mapAI/blob/master/R/plot_correction_surface.R" class="external-link"><code>R/plot_correction_surface.R</code></a></small>
      <div class="d-none name"><code>plot_correction_surface.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Visualizes the spatial correction field (dx, dy) learned by a
PAI model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_correction_surface</span><span class="op">(</span><span class="va">pai_model</span>, <span class="va">gcp_data</span>, n_grid <span class="op">=</span> <span class="fl">100</span>, plot_gcps <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pai-model">pai_model<a class="anchor" aria-label="anchor" href="#arg-pai-model"></a></dt>
<dd><p>A trained <code>pai_model</code> object returned by <code><a href="train_pai_model.html">train_pai_model()</a></code>.</p></dd>


<dt id="arg-gcp-data">gcp_data<a class="anchor" aria-label="anchor" href="#arg-gcp-data"></a></dt>
<dd><p>The <code>sf</code> object of homologous points that was used for
training the model.</p></dd>


<dt id="arg-n-grid">n_grid<a class="anchor" aria-label="anchor" href="#arg-n-grid"></a></dt>
<dd><p>The resolution of the interpolation grid used to create the
smooth surface. Higher values create a more detailed plot but take longer to
compute. Defaults to 100.</p></dd>


<dt id="arg-plot-gcps">plot_gcps<a class="anchor" aria-label="anchor" href="#arg-plot-gcps"></a></dt>
<dd><p>A logical value indicating whether to plot the GCP
locations on the correction surfaces. Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>patchwork</code> object containing two <code>ggplot</code> plots, one for <code>dx</code> and
one for <code>dy</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function serves as a key diagnostic tool for understanding the
behavior of a trained <code>pai_model</code>. It creates two raster plots: one for the
<code>dx</code> (East-West) corrections and one for the <code>dy</code> (North-South) corrections.</p>
<p>The color intensity on the plots reveals the magnitude of the correction at
any given location. Contour lines show the gradient of the change, and black
crosses mark the location of the original Ground Control Points (GCPs),
showing where the model had direct information to learn from.</p>
<p>By examining these surfaces, users can:</p><ul><li><p>Understand the spatial nature of the distortion their model has
learned.</p></li>
<li><p>Identify areas of high vs. low correction.</p></li>
<li><p>Spot potential issues like extreme corrections or unusual artifacts,
especially at the edges of the data where the model is extrapolating.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># This example demonstrates how to train a model and then visualize</span></span></span>
<span class="r-in"><span><span class="co"># what it has learned.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># --- 1. Load required data from the package ---</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gcps</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># --- 2. Train a model to visualize ---</span></span></span>
<span class="r-in"><span><span class="co"># A GAM (Generalized Additive Model) is a great choice for this</span></span></span>
<span class="r-in"><span><span class="co"># because it naturally produces smooth surfaces that are easy to interpret.</span></span></span>
<span class="r-in"><span><span class="va">pai_model_gam</span> <span class="op">&lt;-</span> <span class="fu"><a href="train_pai_model.html">train_pai_model</a></span><span class="op">(</span><span class="va">gcps</span>, pai_method <span class="op">=</span> <span class="st">"gam"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># --- 3. Generate and display the plot ---</span></span></span>
<span class="r-in"><span><span class="co"># This creates the two-panel plot showing the dx and dy correction fields.</span></span></span>
<span class="r-in"><span><span class="va">correction_plot</span> <span class="op">&lt;-</span> <span class="fu">plot_correction_surface</span><span class="op">(</span></span></span>
<span class="r-in"><span>  pai_model <span class="op">=</span> <span class="va">pai_model_gam</span>,</span></span>
<span class="r-in"><span>  gcp_data <span class="op">=</span> <span class="va">gcps</span>,</span></span>
<span class="r-in"><span>  n_grid <span class="op">=</span> <span class="fl">75</span> <span class="co"># Using a slightly coarser grid for a quick example</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To display the plot in an interactive session:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">correction_plot</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also hide the GCPs</span></span></span>
<span class="r-in"><span><span class="va">correction_plot_no_gcps</span> <span class="op">&lt;-</span> <span class="fu">plot_correction_surface</span><span class="op">(</span></span></span>
<span class="r-in"><span>  pai_model <span class="op">=</span> <span class="va">pai_model_gam</span>,</span></span>
<span class="r-in"><span>  gcp_data <span class="op">=</span> <span class="va">gcps</span>,</span></span>
<span class="r-in"><span>  plot_gcps <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">correction_plot_no_gcps</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Konstantinos Vantas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

