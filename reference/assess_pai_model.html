<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assess PAI Model Performance Using Cross-Validation — assess_pai_model • mapAI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assess PAI Model Performance Using Cross-Validation — assess_pai_model"><meta name="description" content="Performs k-fold cross-validation to provide a robust estimate of
a PAI model's predictive performance, offering both random and spatial CV
methods."><meta property="og:description" content="Performs k-fold cross-validation to provide a robust estimate of
a PAI model's predictive performance, offering both random and spatial CV
methods."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mapAI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/demo_data.html">Getting Started with mapAI: A Complete Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/pai_validation.html">Comparing PAI Methods and Validation Strategies</a></li>
    <li><a class="dropdown-item" href="../articles/swiss_data.html">Advanced Analysis with Swiss Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Assess PAI Model Performance Using Cross-Validation</h1>

      <div class="d-none name"><code>assess_pai_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs k-fold cross-validation to provide a robust estimate of
a PAI model's predictive performance, offering both random and spatial CV
methods.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">assess_pai_model</span><span class="op">(</span></span>
<span>  <span class="va">gcp_data</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  validation_type <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>  k_folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-gcp-data">gcp_data<a class="anchor" aria-label="anchor" href="#arg-gcp-data"></a></dt>
<dd><p>An <code>sf</code> object of homologous points, from <code><a href="read_gcps.html">read_gcps()</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A character string specifying the algorithm to assess. One of:
"lm", "gam", "rf", "helmert", "tps".</p></dd>


<dt id="arg-validation-type">validation_type<a class="anchor" aria-label="anchor" href="#arg-validation-type"></a></dt>
<dd><p>A character string specifying the cross-validation
strategy. One of "random" (default) or "spatial".</p></dd>


<dt id="arg-k-folds">k_folds<a class="anchor" aria-label="anchor" href="#arg-k-folds"></a></dt>
<dd><p>An integer specifying the number of folds for
cross-validation. Defaults to 10 for "random" and 5 for "spatial".</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>An integer for setting the random seed for reproducibility.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the underlying <code>train_pai_model</code>
function (e.g., <code>num.threads</code> for <code>ranger</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame summarizing the cross-validation results, containing:</p>
<dl><dt>Method</dt>
<dd><p>The algorithm that was assessed.</p></dd>

<dt>ValidationType</dt>
<dd><p>The CV strategy used.</p></dd>

<dt>Mean_RMSE_2D</dt>
<dd><p>The average 2D RMSE across all k-folds.</p></dd>

<dt>SD_RMSE_2D</dt>
<dd><p>The standard deviation of the 2D RMSE across all k-folds.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Model validation is crucial for understanding how well a model will
generalize to new data. This function automates this process.</p>
<p><strong>Validation Types</strong>:</p><ul><li><p><strong><code>random</code> (default)</strong>: Standard k-fold cross-validation. Data
is randomly partitioned into folds. This can produce overly optimistic
results for spatial data due to spatial autocorrelation.</p></li>
<li><p><strong><code>spatial</code></strong>: Spatial Cross-Validation (SCV). Homologous
points are clustered into <code>k_folds</code> spatially distinct groups using
k-means clustering on their coordinates. The model is then trained on k-1
groups and tested on the held-out group.</p></li>
</ul><p>The function loops through the folds, trains a temporary model on the
training data for each fold, predicts on the test data, and calculates the 2D
Root Mean Squared Error (RMSE). The final output is the mean and standard
deviation of the RMSEs across all folds.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># --- 1. Generate and read demo data ---</span></span></span>
<span class="r-in"><span><span class="va">demo_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_demo_data.html">create_demo_data</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gcp_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_gcps.html">read_gcps</a></span><span class="op">(</span>gcp_path <span class="op">=</span> <span class="va">demo_files</span><span class="op">$</span><span class="va">gcp_path</span>, crs <span class="op">=</span> <span class="fl">3857</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># --- 2. Assess a Random Forest model with RANDOM CV ---</span></span></span>
<span class="r-in"><span><span class="va">random_assessment</span> <span class="op">&lt;-</span> <span class="fu">assess_pai_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gcp_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"rf"</span>,</span></span>
<span class="r-in"><span>  validation_type <span class="op">=</span> <span class="st">"random"</span>,</span></span>
<span class="r-in"><span>  k_folds <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">random_assessment</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># --- 3. Assess the SAME model with SPATIAL CV ---</span></span></span>
<span class="r-in"><span><span class="va">spatial_assessment</span> <span class="op">&lt;-</span> <span class="fu">assess_pai_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gcp_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"rf"</span>,</span></span>
<span class="r-in"><span>  validation_type <span class="op">=</span> <span class="st">"spatial"</span>,</span></span>
<span class="r-in"><span>  k_folds <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spatial_assessment</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Konstantinos Vantas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

